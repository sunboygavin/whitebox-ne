# ç™½ç›’ç½‘å…ƒ (WhiteBox NE) å®Œæ•´æ“ä½œæ‰‹å†Œ

> åŸºäº FRRouting (FRR) çš„çº¯å‘½ä»¤è¡Œç™½ç›’ç½‘å…ƒè§£å†³æ–¹æ¡ˆ
> é¡¹ç›®åœ°å€: https://github.com/sunboygavin/whitebox-ne
> æ–‡æ¡£ç‰ˆæœ¬: v1.0
> æ›´æ–°æ—¥æœŸ: 2026-02-10

---

## ğŸ“š å¿«é€Ÿå¯¼èˆª

- [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [ç³»ç»Ÿè¦æ±‚](#2-ç³»ç»Ÿè¦æ±‚)
- [å®‰è£…éƒ¨ç½²](#3-å®‰è£…éƒ¨ç½²)
- [å¯åŠ¨ä¸åœæ­¢](#4-å¯åŠ¨ä¸åœæ­¢)
- [è¿œç¨‹è®¿é—®](#5-è¿œç¨‹è®¿é—®)
- [é…ç½®ç®¡ç†](#6-é…ç½®ç®¡ç†)
- [åè®®é…ç½®](#7-åè®®é…ç½®)
- [ç›‘æ§ä¸æ’éšœ](#8-ç›‘æ§ä¸æ’éšœ)
- [æºç å®šåˆ¶](#9-æºç å®šåˆ¶)
- [æœ€ä½³å®è·µ](#10-æœ€ä½³å®è·µ)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 ä»€ä¹ˆæ˜¯ç™½ç›’ç½‘å…ƒï¼Ÿ

ç™½ç›’ç½‘å…ƒæ˜¯åŸºäºå¼€æ”¾è½¯ä»¶åè®®æ ˆï¼ˆFRRoutingï¼‰çš„ç½‘ç»œè®¾å¤‡è§£å†³æ–¹æ¡ˆï¼Œæä¾›ï¼š
- âœ… æ ‡å‡†è·¯ç”±åè®®æ”¯æŒï¼ˆBGP, OSPF, VRRP, SRv6, Flowspecï¼‰
- âœ… åä¸ºé£æ ¼å‘½ä»¤è¡Œç•Œé¢
- âœ… SNMP ç®¡ç†æ¥å£
- âœ… å¯æºç çº§å®šåˆ¶

### 1.2 æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| **Zebra** | æ ¸å¿ƒè·¯ç”±ç®¡ç†å™¨ | âœ… è¿è¡Œä¸­ |
| **BGP Daemon (bgpd)** | BGP åè®®ï¼ˆSRv6, Flowspecï¼‰ | âœ… è¿è¡Œä¸­ |
| **OSPF Daemon (ospfd)** | OSPF åè®® | âœ… è¿è¡Œä¸­ |
| **VRRP Daemon (vrrpd)** | VRRP åè®® | âœ… è¿è¡Œä¸­ |
| **Net-SNMP (snmpd)** | SNMP ä»£ç†ï¼ˆAgentXï¼‰ | âœ… è¿è¡Œä¸­ |
| **VTYSH** | å‘½ä»¤è¡Œç•Œé¢ | âœ… å¯ç”¨ |

### 1.3 é¡¹ç›®æ–‡ä»¶ç»“æ„

```
whitebox-ne/
â”œâ”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ æ“ä½œæ‰‹å†Œ.md               # å®Œæ•´æ“ä½œæ‰‹å†Œï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ install_script.sh          # å¿«é€Ÿå®‰è£…è„šæœ¬
â”œâ”€â”€ build_from_source.sh        # æºç æ„å»ºè„šæœ¬
â”œâ”€â”€ frr.conf                  # FRR é…ç½®æ¨¡æ¿
â”œâ”€â”€ net_snmp.conf             # SNMP é…ç½®æ¨¡æ¿
â”œâ”€â”€ netconf_guide.md           # Netconf é›†æˆæŒ‡å—
â””â”€â”€ src/
    â”œâ”€â”€ frr_core/            # ä¿®æ”¹åçš„ FRR æºç 
    â”‚   â”œâ”€â”€ lib/command.c     # åä¸ºé£æ ¼ CLI
    â”‚   â”œâ”€â”€ zebra/srv6.c     # SRv6 é€»è¾‘
    â”‚   â””â”€â”€ bgpd/bgp_flowspec.c  # Flowspec é€»è¾‘
    â”œâ”€â”€ frr_patch/           # è¡¥ä¸æ–‡ä»¶
    â””â”€â”€ snmp_subagent/      # è‡ªå®šä¹‰ SNMP å­ä»£ç†
```

---

## 2. ç³»ç»Ÿè¦æ±‚

### 2.1 ç¡¬ä»¶è¦æ±‚

| é¡¹ç›® | æœ€å°é…ç½® | æ¨èé…ç½® |
|------|---------|---------|
| CPU | 2 vCPU | 4 vCPU |
| å†…å­˜ | 4GB RAM | 8GB RAM |
| ç£ç›˜ | 20GB | 50GB |
| ç½‘ç»œ | 2 ä¸ªæ¥å£ | 4 ä¸ªæ¥å£ |

### 2.2 è½¯ä»¶è¦æ±‚

- âœ… æ“ä½œç³»ç»Ÿ: **Ubuntu 22.04 LTS** (æ¨è)
- âœ… Linux å†…æ ¸: 5.4+ (æ”¯æŒ SRv6)
- âœ… ç”¨æˆ·æƒé™: root æˆ– sudo è®¿é—®æƒé™

### 2.3 ä¾èµ–ç»„ä»¶

```bash
# å¿…éœ€ç»„ä»¶
frr          # FRRouting ä¸»ç¨‹åº
frr-snmp     # FRR SNMP æ‰©å±•
snmp snmpd   # Net-SNMP ä»£ç†
```

---

## 3. å®‰è£…éƒ¨ç½²

### 3.1 å…‹éš†é¡¹ç›®

```bash
# å…‹éš† GitHub ä»“åº“
cd /opt  # æˆ– /usr/local/src
sudo git clone https://github.com/sunboygavin/whitebox-ne.git
cd whitebox-ne
```

### 3.2 å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

é€‚ç”¨äº**å¿«é€Ÿéƒ¨ç½²å’Œæµ‹è¯•**ï¼Œä½¿ç”¨é¢„ç¼–è¯‘åŒ…ï¼š

```bash
# 1. æ·»åŠ æ‰§è¡Œæƒé™
sudo chmod +x install_script.sh

# 2. æ‰§è¡Œå®‰è£…è„šæœ¬
sudo ./install_script.sh
```

**å®‰è£…è„šæœ¬æ‰§è¡Œå†…å®¹**ï¼š
1. âœ… æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…
2. âœ… å®‰è£… FRRã€FRR-SNMPã€SNMP
3. âœ… å¯ç”¨å®ˆæŠ¤è¿›ç¨‹ï¼šzebra, bgpd, ospfd, vrrpd
4. âœ… é…ç½® AgentX æ”¯æŒ
5. âœ… é‡å¯æœåŠ¡

### 3.3 ä»æºç æ„å»ºï¼ˆé«˜çº§å¼€å‘ï¼‰

é€‚ç”¨äºéœ€è¦**æºç çº§å®šåˆ¶**çš„åœºæ™¯ï¼š

```bash
# 1. æ·»åŠ æ‰§è¡Œæƒé™
sudo chmod +x build_from_source.sh

# 2. æ‰§è¡Œæºç æ„å»ºè„šæœ¬
sudo ./build_from_source.sh
```

**æºç æ„å»ºæ‰§è¡Œå†…å®¹**ï¼š
1. âœ… å®‰è£…ç¼–è¯‘ä¾èµ–
2. âœ… ä¸‹è½½ FRR å®˜æ–¹æºç  (v8.1)
3. âœ… åº”ç”¨è‡ªå®šä¹‰è¡¥ä¸
4. âœ… ç¼–è¯‘å¹¶å®‰è£… FRR
5. âœ… ç¼–è¯‘è‡ªå®šä¹‰ SNMP å­ä»£ç†

### 3.4 åº”ç”¨é…ç½®

```bash
# 1. æ‹·è´é…ç½®æ–‡ä»¶æ¨¡æ¿
sudo cp frr.conf /etc/frr/frr.conf

# 2. è®¾ç½®æ­£ç¡®çš„æƒé™
sudo chown frr:frr /etc/frr/frr.conf

# 3. é‡å¯ FRR æœåŠ¡
sudo systemctl restart frr
```

---

## 4. å¯åŠ¨ä¸åœæ­¢

### 4.1 æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨ FRR
sudo systemctl start frr

# åœæ­¢ FRR
sudo systemctl stop frr

# é‡å¯ FRR
sudo systemctl restart frr

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status frr

# å¼€æœºè‡ªå¯
sudo systemctl enable frr
```

### 4.2 æŸ¥çœ‹æœåŠ¡çŠ¶æ€

```bash
# FRR ä¸»æœåŠ¡
systemctl status frr

# å•ä¸ªå®ˆæŠ¤è¿›ç¨‹
systemctl status zebra
systemctl status bgpd
systemctl status ospfd
systemctl status vrrpd

# SNMP æœåŠ¡
systemctl status snmpd
```

### 4.3 æ£€æŸ¥è¿è¡ŒçŠ¶æ€

```bash
# æ–¹æ³• 1: ä½¿ç”¨ vtysh
sudo vtysh -c "show version"
sudo vtysh -c "show running-config"

# æ–¹æ³• 2: æŸ¥çœ‹è¿›ç¨‹
ps aux | grep frr

# æ–¹æ³• 3: æŸ¥çœ‹ç«¯å£
netstat -tlnp | grep -E "179|2601|161"
```

---

## 5. è¿œç¨‹è®¿é—®

### 5.1 æ–¹å¼ä¸€ï¼šSSH + vtyshï¼ˆæ¨èï¼Œæœ€å®‰å…¨ï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šæ—¥å¸¸è¿œç¨‹ç®¡ç†

#### æ­¥éª¤ï¼š

```bash
# ä»æœ¬åœ°ç”µè„‘è¿æ¥
ssh root@æœåŠ¡å™¨IP

# ç™»å½•åè¿›å…¥ vtysh
sudo vtysh
```

#### ä¸€è¡Œå‘½ä»¤ç›´æ¥è¿›å…¥ï¼š

```bash
ssh root@æœåŠ¡å™¨IP -t "sudo vtysh"
```

### 5.2 æ–¹å¼äºŒï¼šSSH éš§é“ + telnet

**é€‚ç”¨åœºæ™¯**ï¼šæ¨¡æ‹Ÿä¼ ç»Ÿè·¯ç”±å™¨è®¿é—®æ–¹å¼

#### æ­¥éª¤ï¼š

```bash
# 1. åœ¨æœ¬åœ°åˆ›å»º SSH éš§é“ï¼ˆåå°è¿è¡Œï¼‰
ssh -L 2601:127.0.0.1:2601 root@æœåŠ¡å™¨IP -N

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿æ¥
telnet localhost 2601
```

### 5.3 æ–¹å¼ä¸‰ï¼šç›´æ¥ç›‘å¬æ‰€æœ‰æ¥å£ï¼ˆä¸æ¨èï¼Œå®‰å…¨æ€§ä½ï¼‰

**âš ï¸ è­¦å‘Š**ï¼šæ­¤æ–¹å¼ä¼šæš´éœ²ç®¡ç†ç«¯å£åˆ°å…¬ç½‘ï¼Œä»…åœ¨å†…ç½‘ç¯å¢ƒä½¿ç”¨

#### æ­¥éª¤ï¼š

1. **ä¿®æ”¹å®ˆæŠ¤è¿›ç¨‹é…ç½®**ï¼š
```bash
sudo vi /etc/frr/daemons
```

ä¿®æ”¹ç›‘å¬åœ°å€ï¼š
```bash
# åŸé…ç½®ï¼š
zebra_options="-M snmp -A 127.0.0.1 -s 90000000"

# ä¿®æ”¹ä¸ºï¼š
zebra_options="-M snmp -A 0.0.0.0 -s 90000000"
```

2. **é‡å¯ FRR**ï¼š
```bash
sudo systemctl restart frr
```

3. **å¼€æ”¾é˜²ç«å¢™**ï¼š
```bash
# UFW é˜²ç«å¢™
sudo ufw allow 2601/tcp  # vtysh ç«¯å£
sudo ufw allow 179/tcp   # BGP ç«¯å£
sudo ufw allow 89/tcp    # OSPF ç«¯å£
```

4. **è¿œç¨‹è¿æ¥**ï¼š
```bash
telnet æœåŠ¡å™¨IP 2601
```

---

## 6. é…ç½®ç®¡ç†

### 6.1 è¿›å…¥é…ç½®æ¨¡å¼

```bash
# æ–¹æ³• 1: äº¤äº’å¼
sudo vtysh
# è¿›å…¥åæ‰§è¡Œ
configure terminal

# æ–¹æ³• 2: å•è¡Œå‘½ä»¤
sudo vtysh -c "configure terminal"
```

### 6.2 å¸¸ç”¨é…ç½®å‘½ä»¤

| åŠŸèƒ½ | åä¸ºé£æ ¼ | Cisco é£æ ¼ | è¯´æ˜ |
|------|----------|-------------|------|
| è¿›å…¥é…ç½®æ¨¡å¼ | `system-view` | `configure terminal` | |
| æŸ¥çœ‹è¿è¡Œé…ç½® | `display current-configuration` | `show running-config` | |
| ä¿å­˜é…ç½® | `save` | `write` | ä¿å­˜åˆ°å¯åŠ¨é…ç½® |
| é€€å‡ºé…ç½®æ¨¡å¼ | `quit` | `exit` | |

### 6.3 æ¥å£é…ç½®ç¤ºä¾‹

```bash
# è¿›å…¥ vtysh
sudo vtysh

# é…ç½®æ¥å£
configure terminal
interface eth0
 ip address 192.168.10.1/24
 ipv6 address 2001:db8:a::1/64
 no shutdown
exit

# ä¿å­˜é…ç½®
write
```

### 6.4 é…ç½®æ–‡ä»¶ä½ç½®

```bash
# FRR ä¸»é…ç½®æ–‡ä»¶
/etc/frr/frr.conf

# å®ˆæŠ¤è¿›ç¨‹é…ç½®
/etc/frr/daemons

# VTYSH é…ç½®
/etc/frr/vtysh.conf

# SNMP é…ç½®
/etc/snmp/snmpd.conf

# æ—¥å¿—æ–‡ä»¶
/var/log/frr/frr.log
```

---

## 7. åè®®é…ç½®

### 7.1 BGP é…ç½®

#### åŸºæœ¬ BGP é…ç½®ï¼š

```bash
sudo vtysh
configure terminal

router bgp 65000
 bgp router-id 1.1.1.1
 neighbor 203.0.113.2 remote-as 65001
 !
 address-family ipv4 unicast
  network 192.168.10.0/24
  neighbor 203.0.113.2 activate
 exit-address-family
exit
write
```

#### SRv6 é…ç½®ï¼š

```bash
configure terminal
router bgp 65000
 neighbor 2001:db8:b::2 remote-as 65001
 !
 address-family ipv6 unicast
  network 2001:db8:1::/64
  neighbor 2001:db8:b::2 activate
 exit-address-family
exit
write
```

#### Flowspec é…ç½®ï¼š

```bash
configure terminal
router bgp 65000
 !
 address-family ipv4 flowspec
  neighbor 2001:db8:b::2 activate
 exit-address-family
exit
write
```

#### æŸ¥çœ‹ BGP çŠ¶æ€ï¼š

```bash
# æŸ¥çœ‹é‚»å±…æ‘˜è¦
show ip bgp summary

# æŸ¥çœ‹è·¯ç”±è¡¨
show ip bgp

# æŸ¥çœ‹æŒ‡å®šé‚»å±…
show ip bgp neighbors 203.0.113.2

# åä¸ºé£æ ¼
display bgp peer
```

### 7.2 OSPF é…ç½®

#### åŸºæœ¬ OSPF é…ç½®ï¼š

```bash
sudo vtysh
configure terminal

router ospf
 ospf router-id 1.1.1.1
 network 192.168.10.0/24 area 0.0.0.0
exit

# é…ç½®æ¥å£ OSPF
interface eth0
 ip ospf area 0.0.0.0
exit

write
```

#### æŸ¥çœ‹ OSPF çŠ¶æ€ï¼š

```bash
# æŸ¥çœ‹é‚»å±…
show ip ospf neighbor

# æŸ¥çœ‹æ¥å£
show ip ospf interface

# æŸ¥çœ‹è·¯ç”±
show ip ospf route

# åä¸ºé£æ ¼
display ip ospf peer
```

### 7.3 VRRP é…ç½®

```bash
sudo vtysh
configure terminal
interface eth0
 vrrp 10
  vrrp-description "ä¸»ç½‘å…³å¤‡ä»½"
  vrrp-primary
  vrrp-priority 100
  vrrp-vip 192.168.10.254/24
exit
write
```

#### æŸ¥çœ‹ VRRP çŠ¶æ€ï¼š

```bash
show vrrp

# åä¸ºé£æ ¼
display vrrp
```

---

## 8. ç›‘æ§ä¸æ’éšœ

### 8.1 æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹ FRR æ—¥å¿—
sudo tail -f /var/log/frr/frr.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u frr -f

# æŸ¥çœ‹å®ˆæŠ¤è¿›ç¨‹æ—¥å¿—
sudo journalctl -u zebra -f
sudo journalctl -u bgpd -f
`````

### 8.2 æ€§èƒ½ç›‘æ§

```bash
# æŸ¥çœ‹è¿›ç¨‹èµ„æºä½¿ç”¨
top -p $(pgrep -f "zebra|bgpd|ospfd")

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
ps aux | grep frr | awk '{print $2, $4, $6, $11}'

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
netstat -anp | grep -E "179|2601|89"
```

### 8.3 SNMP ç›‘æ§

#### éªŒè¯ SNMP AgentXï¼š

```bash
# æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
snmpwalk -v2c -c public localhost .1.3.6.1.2.1.1.1.0

# æŸ¥çœ‹ BGP MIB
snmpwalk -v2c -c public localhost .1.3.6.1.2.1.15

# æŸ¥çœ‹æ¥å£ MIB
snmpwalk -v2c -c public localhost .1.3.6.1.2.1.2
```

#### å¯åŠ¨è‡ªå®šä¹‰ SNMP å­ä»£ç†ï¼š

```bash
cd /root/.openclaw/workspace/whitebox-ne/src/snmp_subagent
sudo ./custom_subagent &
```

### 8.4 å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| BGP é‚»å±…æ— æ³•å»ºç«‹ | é˜²ç«å¢™ã€AS å·é”™è¯¯ | æ£€æŸ¥ `show ip bgp summary`ï¼Œå¼€æ”¾ç«¯å£ 179 |
| OSPF é‚»å±…æ— æ³•å»ºç«‹ | ç½‘ç»œæ©ç ã€åŒºåŸŸä¸åŒ¹é… | æ£€æŸ¥ `show ip ospf neighbor`ï¼ŒéªŒè¯é…ç½® |
| vtysh æ— æ³•è¿›å…¥ | é…ç½®æ–‡ä»¶æƒé™ | ç¡®ä¿ `/etc/frr/frr.conf` å±äº `frr:frr` |
| SNMP æ— æ³•è·å–æ•°æ® | AgentX æœªå¯ç”¨ | æ£€æŸ¥ `snmpd.conf` åŒ…å« `master agentx` |
| æœåŠ¡æ— æ³•å¯åŠ¨ | é…ç½®æ–‡ä»¶è¯­æ³•é”™è¯¯ | ä½¿ç”¨ `frr --test` æ£€æŸ¥é…ç½® |

### 8.5 Debug æ¨¡å¼

```bash
# ä¿®æ”¹ /etc/frr/daemonsï¼Œæ·»åŠ  debug é€‰é¡¹
# bgpd_options="-M snmp -A 127.0.0.1 --debug bgp"

# æˆ–åœ¨ vtysh ä¸­å¯ç”¨
sudo vtysh
configure terminal
debug bgp events
debug bgp zebra

# æŸ¥çœ‹è°ƒè¯•æ—¥å¿—
sudo tail -f /var/log/frr/frr.log
```

---

## 9. æºç å®šåˆ¶

### 9.1 ä¿®æ”¹åä¸ºé£æ ¼ CLI

**æ–‡ä»¶ä½ç½®**: `src/frr_core/lib/command.c`

#### æ·»åŠ æ–°å‘½ä»¤ç¤ºä¾‹ï¼š

```c
// åœ¨ command.c ä¸­æ·»åŠ å‘½ä»¤æ³¨å†Œ
DEFUN (cmd_custom_command,
       custom_command_cmd,
       "custom-command",
       "è‡ªå®šä¹‰åä¸ºé£æ ¼å‘½ä»¤")
{
  /* å‘½ä»¤å¤„ç†é€»è¾‘ */
  vty_out(vty, "æ‰§è¡Œè‡ªå®šä¹‰å‘½ä»¤\n");
  return CMD_SUCCESS;
}

/* æ³¨å†Œå‘½ä»¤åˆ°å‘½ä»¤è¡¨ */
static const struct cmd_element custom_command_elem =
  CMD_INSTALL_NODE(CONFIG_NODE, VIEW_NODE, CONFIG_CMD,
                 "custom-command", "è‡ªå®šä¹‰å‘½ä»¤æè¿°");
```

### 9.2 ä¿®æ”¹ SRv6 é€»è¾‘

**æ–‡ä»¶ä½ç½®**: `src/frr_core/zebra/srv6.c`

#### å®šåˆ¶ SID å¤„ç†ï¼š

```c
/* ä¿®æ”¹ SID å®‰è£…é€»è¾‘ */
int zebra_srv6_sid_install(struct zebra_vrf *zvrf,
                         struct srv6_sid *sid)
{
  /* æ·»åŠ è‡ªå®šä¹‰é€»è¾‘ */
  /* ä¾‹å¦‚ï¼šè®°å½• SID åˆ†é…ã€å¯¹æ¥ç¡¬ä»¶ç­‰ */

  return 0;
}
```

### 9.3 ä¿®æ”¹ Flowspec é€»è¾‘

**æ–‡ä»¶ä½ç½®**: `src/frr_core/bgpd/bgp_flowspec.c`

#### å®šåˆ¶ Flowspec è§„åˆ™å¤„ç†ï¼š

```c
/* ä¿®æ”¹è§„åˆ™è§£æé€»è¾‘ */
int bgp_fs_parse_action(struct bgp *bgp,
                      struct bgp_fs_route *fs)
{
  /* æ·»åŠ è‡ªå®šä¹‰åŠ¨ä½œè§£æ */
  /* ä¾‹å¦‚ï¼šé‡å®šå‘åˆ°æ§åˆ¶å™¨ */
  return 0;
}
```

### 9.4 ç¼–è¯‘å¹¶éƒ¨ç½²

```bash
# 1. ä¿®æ”¹æºç åï¼Œé‡æ–°æ„å»º
cd /root/.openclaw/workspace/whitebox-ne
sudo ./build_from_source.sh

# 2. é‡å¯æœåŠ¡
sudo systemctl restart frr
```

---

## 10. æœ€ä½³å®è·µ

### 10.1 é…ç½®ç®¡ç†

```bash
# 1. å¤‡ä»½é…ç½®
sudo cp /etc/frr/frr.conf /etc/frr/frr.conf.backup

# 2. æµ‹è¯•é…ç½®
sudo vtysh -c "show running-config" > new_config.conf

# 3. åº”ç”¨æ–°é…ç½®
sudo cp new_config.conf /etc/frr/frr.conf
sudo chown frr:frr /etc/frr/frr.conf
sudo systemctl restart frr
```

### 10.2 å®‰å…¨å»ºè®®

```bash
# 1. é™åˆ¶ vtysh è®¿é—®ï¼ˆæœ¬åœ°ç›‘å¬ï¼‰
# ç¡®ä¿ /etc/frr/daemons ä¸­ä½¿ç”¨ -A 127.0.0.1

# 2. é…ç½®é˜²ç«å¢™
sudo ufw enable
sudo ufw default deny incoming
sudo ufw allow from ä¿¡ä»»çš„IP to any port 22  # SSH
sudo ufw allow from ä¿¡ä»»çš„IP to any port 179 # BGP
sudo ufw allow from ä¿¡ä»»çš„IP to any port 89  # OSPF

# 3. SNMP è®¿é—®æ§åˆ¶
# åœ¨ /etc/snmp/snmpd.conf ä¸­é™åˆ¶è®¿é—®
# view systemonly included .1.3.6.1.2.1.1
# access notConfigGroup "" any auth exact systemonly none none
```

### 10.3 é«˜å¯ç”¨éƒ¨ç½²

```bash
# ä½¿ç”¨ VRRP å®ç°ç½‘å…³å†—ä½™
# åœ¨ä¸¤å°è®¾å¤‡ä¸Šé…ç½®ï¼š
interface eth0
 vrrp 10
  vrrp-priority 100  # ä¸»è®¾å¤‡ 100ï¼Œå¤‡è®¾å¤‡ 50
  vrrp-vip 192.168.10.254/24
  vrrp-preempt
```

### 10.4 ç›‘æ§é›†æˆ

```bash
# é…ç½® SNMP ç›‘æ§
# 1. å®‰è£…ç›‘æ§å·¥å…·ï¼ˆå¦‚ Prometheus + snmp_exporterï¼‰
# 2. é…ç½® SNMP exporter æŒ‡å‘æœ¬æœº
# 3. è®¾ç½® Grafana ä»ªè¡¨æ¿
```

---

## é™„å½•

### A. ç«¯å£å¯¹ç…§è¡¨

| æœåŠ¡ | ç«¯å£ | åè®® | è¯´æ˜ |
|------|-------|------|------|
| vtysh | 2601 | TCP | å‘½ä»¤è¡Œæ¥å£ |
| BGP | 179 | TCP | BGP åè®® |
| OSPF | 89 | UDP | OSPF åè®® |
| SNMP | 161 | UDP | SNMP ä»£ç† |
| SNMP Trap | 162 | UDP | SNMP é™·é˜± |

### B. å‚è€ƒèµ„æº

- **FRR å®˜æ–¹æ–‡æ¡£**: https://docs.frrouting.org/
- **é¡¹ç›® GitHub**: https://github.com/sunboygavin/whitebox-ne
- **Netconf é›†æˆæŒ‡å—**: `netconf_guide.md`
- **æµ‹è¯•æŠ¥å‘Š**: `TEST_REPORT.md`

---

## è”ç³»ä¸æ”¯æŒ

- é¡¹ç›®ç»´æŠ¤è€…: Gavin (sunboygavin)
- GitHub Issues: https://github.com/sunboygavin/whitebox-ne/issues

---

**æ–‡æ¡£ç»“æŸ**
